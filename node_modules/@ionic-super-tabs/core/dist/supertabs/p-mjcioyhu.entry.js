import{r as t,h as s,H as i,g as h,c as o}from"./p-fe67b22a.js";import{s as e,d as n,p as a,c as r,g as l,a as c}from"./p-a1ef0278.js";const u=class{constructor(s){t(this,s),this.scrollableContainer=!1,this.retryAttempts=0}componentDidLoad(){this.indexChildren(),this.initCmp()}initCmp(){this.el&&this.el.shadowRoot||!(++this.retryAttempts<1e3)?(this.label||this.icon||this.indexChildren(),this.el.shadowRoot.querySelector("slot").addEventListener("slotchange",()=>{this.indexChildren()})):requestAnimationFrame(()=>this.initCmp())}indexChildren(){this.label=this.el.querySelector("ion-label"),this.icon=this.el.querySelector("ion-icon")}render(){return s(i,{role:"button","aria-label":!!this.label&&this.label.innerText,"aria-disabled":!!this.disabled&&"true","aria-selected":this.active?"true":"false",class:{"ion-activatable":!0,"ion-focusable":!0,"icon-only":!!this.icon&&!this.label,"label-only":!!this.label&&!this.icon,active:Boolean(this.active),scrollableContainer:this.scrollableContainer}},s("slot",null),s("ion-ripple-effect",{type:"unbounded"}))}get el(){return h(this)}static get style(){return":host{-ms-flex:1 0 0px;flex:1 0 0;cursor:pointer;position:relative;max-width:100%;overflow:hidden;display:-ms-flexbox;display:flex;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transform:translateZ(0);transform:translateZ(0);height:72px;padding:0 24px;-webkit-touch-callout:none}:host,:host ::slotted(ion-icon),:host ::slotted(ion-label),:host ion-icon,:host ion-label{-webkit-user-select:none;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased}:host ::slotted(ion-icon),:host ::slotted(ion-label),:host ion-icon,:host ion-label{-webkit-transition-property:all;transition-property:all;-webkit-transition-duration:.3s;transition-duration:.3s;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-delay:0s;transition-delay:0s;-webkit-box-sizing:content-box!important;box-sizing:content-box!important}:host ::slotted(ion-label),:host ion-label{color:var(--st-label-color-inactive,var(--st-base-color-inactive));line-height:var(--st-label-line-height,14px);height:var(--st-label-height,14px);font-size:var(--st-label-font-size,14px);text-transform:var(--st-label-text-transform,uppercase);font-weight:var(--st-label-font-weight,500);padding-bottom:var(--st-label-padding-bottom,16px)}:host ::slotted(ion-icon),:host ion-icon{color:var(--st-icon-color-inactive,var(--st-base-color-inactive));fill:var(--st-icon-color-inactive,var(--st-base-color-inactive));min-height:var(--st-icon-size,24px);min-width:var(--st-icon-size,24px);font-size:var(--st-icon-size,24px);padding-top:12px}\@media (hover:hover){:host(:hover){background:rgba(var(--ion-color-contrast-rgb),.04)}}:host(.active) ::slotted(ion-icon),:host(.active) ::slotted(ion-label),:host(.active) ion-icon,:host(.active) ion-label{-webkit-transition-delay:75ms;transition-delay:75ms}:host(.active) ::slotted(ion-label),:host(.active) ion-label{color:var(--st-label-color-active,var(--st-base-color-active))}:host(.active) ::slotted(ion-icon),:host(.active) ion-icon{color:var(--st-icon-color-active,var(--st-base-color-active));fill:var(--st-icon-color-active,var(--st-base-color-active))}:host(.icon-only),:host(.label-only){height:48px;-ms-flex-pack:center;justify-content:center}:host(.scrollableContainer){-ms-flex-positive:0;flex-grow:0;-ms-flex-preferred-size:auto;flex-basis:auto;min-width:90px;max-width:360px}::slotted{-ms-flex-negative:1;flex-shrink:1}:host(.label-only) ::slotted(ion-label),:host(.label-only) ion-label{padding-bottom:0}:host(.icon-only) ::slotted(ion-icon),:host(.icon-only) ion-icon{padding-top:0}"}},d=class{constructor(s){t(this,s),this.showIndicator=!0,this.color="primary",this.scrollable=!1,this.scrollablePadding=!0,this.buttons=[],this.activeTabIndex=0,this.leftThreshold=0,this.rightThreshold=0,this.hostCls={},this.clientWidth=0,this.buttonClick=o(this,"buttonClick",7)}async componentDidLoad(){this.debug("componentDidLoad"),this.setHostCls(),await this.queryButtons(),this.slot=this.el.shadowRoot.querySelector("slot"),this.slot.addEventListener("slotchange",this.onSlotChange.bind(this)),this.clientWidth=this.el.clientWidth,this.activeTabIndex>0&&requestAnimationFrame(()=>{this.alignIndicator(this.activeTabIndex)})}componentWillUpdate(){this.debug("componentWillUpdate"),this.updateThresholds()}setActiveTab(t,s,i){return this.activeTabIndex=t,this.markButtonActive(this.buttons[t]),s&&this.alignIndicator(t,i),Promise.resolve()}setSelectedTab(t,s){return this.alignIndicator(t,s),Promise.resolve()}moveContainer(t,s){return this.buttonsContainerEl?(e(this.buttonsContainerEl,t,0,s?this.config.transitionDuration:0),Promise.resolve()):(this.debug("moveContainer called before this.buttonsContainerEl was defined"),Promise.resolve())}onClick(t){if(!t||!t.target)return;let s=t.target;const i=s.tagName.toLowerCase();if("super-tab-button"!==i){if("super-tabs-toolbar"===i)return;s=s.closest("super-tab-button")}this.setActiveTab(s.index,!0,!0),this.buttonClick.emit(s)}async onTouchStart(t){if(!this.scrollable)return;this.debug("onTouchStart",t);const s=a(t);s.x<this.leftThreshold||s.x>this.clientWidth-this.rightThreshold||(this.initialCoords=s,this.lastPosX=s.x)}async onTouchMove(t){if(!this.buttonsContainerEl||!this.scrollable||!this.initialCoords||"number"!=typeof this.lastPosX)return this.debug("onTouchMove called before this.buttonsContainerEl was defined"),Promise.resolve();const s=a(t);if(!this.isDragging){if(!r(s,this.initialCoords,this.config))return void(Math.abs(s.y-this.initialCoords.y)>100&&(this.initialCoords=void 0,this.lastPosX=void 0));this.isDragging=!0}if(!this.isDragging)return;t.stopImmediatePropagation();const i=this.lastPosX-s.x;if(this.lastPosX=s.x,0===i)return;const h=l(this.buttonsContainerEl),o=c(this.buttonsContainerEl,i);o!==h&&this.moveContainer(o,!1)}async onTouchEnd(){this.debug("onTouchEnd"),this.isDragging=!1,this.initialCoords=void 0,this.lastPosX=void 0}async onColorUpdate(){this.setHostCls()}setHostCls(){const t={};"string"==typeof this.color&&this.color.trim().length>0&&(t["ion-color-"+this.color.trim()]=!0),this.hostCls=t}async onSlotChange(){this.debug("onSlotChange"),this.clientWidth=this.el.clientWidth,await this.queryButtons(),await this.alignIndicator(this.activeTabIndex)}async queryButtons(){this.debug("Querying buttons");const t=Array.from(this.el.querySelectorAll("super-tab-button"));if(await Promise.all(t.map(t=>t.componentOnReady())),t)for(let s=0;s<t.length;s++){const i=t[s];i.index=s,i.scrollableContainer=this.scrollable,i.active=this.activeTabIndex===s,i.active&&(this.activeButton=i)}this.buttons=t}updateThresholds(){this.config&&("both"!==this.config.sideMenu&&"left"!==this.config.sideMenu||(this.leftThreshold=this.config.sideMenuThreshold),"both"!==this.config.sideMenu&&"right"!==this.config.sideMenu||(this.rightThreshold=this.config.sideMenuThreshold))}markButtonActive(t){t&&(this.activeButton&&(this.activeButton.active=!1),t.active=!0,this.activeButton=t)}adjustContainerScroll(t){if(!this.buttonsContainerEl)return void this.debug("adjustContainerScroll called before this.buttonsContainerEl was defined");let s;const i=this.indicatorPosition,h=this.indicatorWidth,o=this.buttonsContainerEl.clientWidth,e=l(this.buttonsContainerEl),n=o/2-h/2;i+h+n>o+e?s=e+(i+h+n-o-e):i-n<e&&(s=i-n,s=Math.max(s,0),s=s>i?i-o+h:s),"number"==typeof s&&this.moveContainer(s,t)}alignIndicator(t,s=!1){this.showIndicator?this.indicatorEl?requestAnimationFrame(()=>{const i=t%1,h=this.isDragging=i>0;let o,e;const n=Math.floor(t),a=Math.ceil(t),r=this.buttons[n];if(r){if(o=r.offsetLeft,e=r.clientWidth,this.isDragging&&n!==a){const t=this.buttons[a];o+=i*(t.offsetLeft-o),e+=i*(t.clientWidth-e)}this.indicatorPosition=o,this.indicatorWidth=e,this.scrollable&&this.adjustContainerScroll(s||!h),this.indicatorEl.style.setProperty("--st-indicator-position-x",this.indicatorPosition+"px"),this.indicatorEl.style.setProperty("--st-indicator-scale-x",String(this.indicatorWidth/100)),this.indicatorEl.style.setProperty("--st-indicator-transition-duration",this.isDragging?"0":`${this.config.transitionDuration}ms`)}}):this.debug("alignIndicator called before this.buttonsContainerEl was defined"):this.debug("showIndicator is false")}debug(...t){n(this.config,"toolbar",t)}render(){return s(i,{role:"navigation",class:this.hostCls},s("div",{class:"buttons-container",ref:t=>this.buttonsContainerEl=t},s("slot",null),this.showIndicator&&s("super-tab-indicator",{ref:t=>this.indicatorEl=t,toolbarPosition:this.el.assignedSlot.name})))}get el(){return h(this)}static get watchers(){return{color:["onColorUpdate"]}}static get style(){return":host{-ms-flex:0 1 auto;flex:0 1 auto;display:block;position:relative;background:var(--super-tabs-toolbar-background,var(--ion-color-base));overflow:visible;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:auto;-ms-touch-action:pan-x;touch-action:pan-x;z-index:2;-ms-flex-order:-1;order:-1;-webkit-user-select:none;-webkit-touch-callout:none;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased}:host,:host .buttons-container{width:100%;-webkit-transform:translateZ(0);transform:translateZ(0)}:host .buttons-container{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;overflow:hidden}:host(:not([no-border])):after{left:0;bottom:-8px;background-position:left 0 top 0;position:absolute;width:100%;height:8px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAIBAMAAAACWGKkAAAAFVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAASAQCkAAAAB3RSTlMFTEIzJBcOYhQUIwAAAB9JREFUCNdjEIQCBiUoYDCGAgYXKGAIhQKGNChgwAAAorMLKSCkL40AAAAASUVORK5CYII=);background-repeat:repeat-x;content:\"\";z-index:3;-webkit-transform:translateZ(0);transform:translateZ(0)}:host([scrollable]) .buttons-container{will-change:scroll-position}:host([scrollable][scrollable-padding]) .buttons-container{padding-left:var(--st-scrollable-toolbar-padding-left,52px);width:calc(100% - var(--st-scrollable-toolbar-padding-left, $st-scrollable-toolbar-padding-left))}"}};export{u as super_tab_button,d as super_tabs_toolbar};